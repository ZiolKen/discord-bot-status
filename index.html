<!DOCTYPE html>

<html lang="en">

<head>
  <meta charSet="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta content="ie=edge" http-equiv="X-UA-Compatible" />
  <link rel="icon" type="image/png" href="assets/ico.png" />
  <title>ZiolKen | Bot Status</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="preload" href="https://challenges.cloudflare.com/turnstile/v0/api.js" as="script" />
  <meta name="theme-color" content="#000000" />
  <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css" rel="stylesheet" /> -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-tomorrow.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-cpp.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-java.min.js"></script>
  <link rel="manifest" href="assets/manifest.json" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/ico.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="assets/ico.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="assets/ico.png" />
  <meta name="description" content="@ã‚¸ã‚ªãƒ«ã‚±ãƒ³ | Discord bot status, current system info & status, real-time update. â€¢ @ZiolKen." />
  <meta name="author" content="@ã‚¸ã‚ªãƒ«ã‚±ãƒ³ | Bot Status" />
  <meta property="og:title" content="@ã‚¸ã‚ªãƒ«ã‚±ãƒ³ | Bot Status" />
  <meta property="og:description" content="@ã‚¸ã‚ªãƒ«ã‚±ãƒ³ | Discord bot status, current system info & status, real-time update. â€¢ @ZiolKen." />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="@ã‚¸ã‚ªãƒ«ã‚±ãƒ³ | Bot Status" />
  <meta name="twitter:description" content="@ã‚¸ã‚ªãƒ«ã‚±ãƒ³ | Discord bot status, current system info & status, real-time update. â€¢ @ZiolKen." />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header></header>
  <div class="status-header">
    <div id="status-banner" class="status-indicator">
      <div class="spinner" id="spinner"></div>
    </div>
    <a href="https://discord.com/oauth2/authorize?client_id=1398238289500307578&scope=bot&permissions=8" 
      target="_blank" 
      class="invite-card">
    <img src="assets/discord.png"
         alt="Discord"
         class="discord-logo" />
    Invite Bot
  </a>
  </div>

  <div class="card" id="status-card">
    <div>
      <div class="label">Host Service</div>
      <div class="value" id="host">--</div>
    </div>
    <div>
      <div class="label">Ping</div>
      <div class="value" id="ping">--</div>
    </div>
    <div>
      <div class="label">Uptime</div>
      <div class="value" id="uptime">--</div>
    </div>
    <div>
      <div class="label">Servers</div>
      <div class="value" id="guilds">--</div>
    </div>
    <div>
      <div class="label">Users</div>
      <div class="value" id="users">--</div>
    </div>
    <div>
      <div class="label">Last Update</div>
      <div class="value" id="updated">--</div>
    </div>
  </div>

  <div class="services">
    <h2>ğŸ”§ Services</h2>
    <div class="service">
      <span>Discord Gateway</span>
      <span class="online-dot">â— Online</span>
    </div>
    <div class="service">
      <span>Command System</span>
      <span class="online-dot">â— Online</span>
    </div>
    <div class="service">
      <span>API Endpoint</span>
      <span class="online-dot" id="api-status">â— Online</span>
    </div>
  </div>

  <div class="incidents">
    <h2>ğŸš¨ Incidents History</h2>
    <div id="incidents-list">
      Loading incidents...
    </div>
  </div>

  <div class="chart-container">
    <h2>ğŸ“ˆ Ping History</h2>
    <canvas id="pingChart" height="100"></canvas>
  </div>

  <div class="tech">
    <h2>ğŸ§  Technical Info</h2>
    <div class="service"><span>Bot Version</span><span>1.2.7</span></div>
    <div class="service"><span>discord.js</span><span>14.13.0</span></div>
    <div class="service"><span>Node.js</span><span>22.16.0</span></div>
    <div class="service"><span>Last Boot</span><span id="boot">--</span></div>
  </div>

  <footer>
    Â© 2025 ZiolKen | Bot Status
  </footer>
  
  <script>
const state = {
  online: false,
  host: {
    name: "--",
    status: "unknown"
  },
  services: {},
  stats: {
    ping: null,
    uptime: "--",
    guilds: 0,
    users: 0,
    lastBoot: "--",
    updated: "--"
  },
  incidents: []
};
function renderGlobalStatus() {
  const banner = document.getElementById("status-banner");

  const hasIncident = state.incidents.length > 0;
  const allOperational = Object.values(state.services)
    .every(s => s === "online");

  let text = "All Systems Operational";
  let cls = "online";

  if (state.host.status === "down") {
    text = "Major System Outage";
    cls = "offline";
  } else if (hasIncident) {
    text = "Partial System Outage";
    cls = "degraded";
  } else if (!allOperational) {
    text = "Degraded Performance";
    cls = "degraded";
  }

  banner.textContent = text;
  banner.className = `status-indicator ${cls}`;
}
function renderServices() {
  const map = {
    api: "API Endpoint",
    gateway: "Discord Gateway",
    commands: "Command System"
  };

  const box = document.querySelector(".services");
  box.innerHTML = `<h2>ğŸ”§ Services</h2>`;

  for (const [key, label] of Object.entries(map)) {
    let status = state.services[key] || "offline";

    // ğŸ”¥ Incident Ã©p service xuá»‘ng
    if (state.incidents.some(i => i.service === key)) {
      status = "offline";
    }

    box.innerHTML += `
      <div class="service">
        <span>${label}</span>
        <span class="status-dot ${status}">
          ${status === "online"
            ? "Operational"
            : status === "degraded"
            ? "Degraded Performance"
            : "Offline"}
        </span>
      </div>
    `;
  }
}
function renderStats() {
  document.getElementById("host").textContent = state.host.name;
  document.getElementById("ping").textContent =
    state.stats.ping != null ? `${Math.round(state.stats.ping)} ms` : "N/A";
  document.getElementById("uptime").textContent = state.stats.uptime;
  document.getElementById("guilds").textContent = state.stats.guilds;
  document.getElementById("users").textContent = state.stats.users;
  document.getElementById("updated").textContent =
    new Date(state.stats.updated).toLocaleString();
  document.getElementById("boot").textContent =
    new Date(state.stats.lastBoot).toLocaleString();
}
async function loadStatus() {
  try {
    const res = await fetch(STATUS_URL, { cache: "no-store" });
    const d = await res.json();

    state.online = d.status === "online";

    state.host = {
      name: d.host,
      status: d.hostService
    };

    state.services = d.services;

    state.stats = {
      ping: d.ping,
      uptime: d.uptime,
      guilds: d.guilds,
      users: d.users,
      lastBoot: d.lastBoot,
      updated: d.updated
    };

    renderStats();
    renderServices();
    renderGlobalStatus();
    if (d.ping != null) updateChart(d.ping);

  } catch {
    state.host.status = "down";
    state.services = {};
    renderGlobalStatus();
  }
}
async function loadIncidents() {
  try {
    const res = await fetch(INCIDENTS_URL, { cache: "no-store" });
    state.incidents = await res.json();
    renderIncidents(state.incidents);
    renderGlobalStatus();
    renderServices();
  } catch {
    state.incidents = [];
  }
}
  </script>

  <script>
          document.addEventListener("contextmenu", e => e.preventDefault());
  
          document.addEventListener("keydown", e => {
            if (
              e.key === "F12" ||
              (e.ctrlKey && e.shiftKey && ["I", "J", "C"].includes(e.key)) ||
              (e.ctrlKey && e.key === "U")
            ) {
              e.preventDefault();
            }
          });
  
          console.log('%câ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ•—\nâ–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘\nâ•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘\nâ–‘â•šâ•â•â•â–ˆâ–ˆâ•—â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â–‘â•šâ•â•\nâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•—\nâ•šâ•â•â•â•â•â•â–‘â–‘â–‘â–‘â•šâ•â•â–‘â–‘â–‘â–‘â•šâ•â•â•â•â•â–‘â•šâ•â•â–‘â–‘â–‘â–‘â–‘â•šâ•â•', 'color: red; font-weight: bold;');
  </script>
  
</body>

</html>